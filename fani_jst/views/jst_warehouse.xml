<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- Tree/List View -->
        <record id="view_jst_warehouse_tree" model="ir.ui.view">
            <field name="name">jst.warehouse.tree</field>
            <field name="model">jst.warehouse</field>
            <field name="arch" type="xml">
                <list string="JST Warehouses">
                    <header>
                        <button name="action_sync_warehouses_by_ids" type="object" string="Sync Warehouses" class="btn-primary"/>
                    </header>
                    <field name="warehouseId"/>
                    <field name="warehouseName"/>
                    <field name="warehouseShortName"/>
                    <field name="warehouseType"/>
                    <field name="country"/>
                    <field name="province"/>
                    <field name="city"/>
                    <field name="contactName"/>
                    <field name="mobile"/>
                    <field name="warehouseServerCode"/>
                    <field name="created"/>
                    <field name="jst_modified"/>
                </list>
            </field>
        </record>

        <!-- Form View -->
        <record id="view_jst_warehouse_form" model="ir.ui.view">
            <field name="name">jst.warehouse.form</field>
            <field name="model">jst.warehouse</field>
            <field name="arch" type="xml">
                <form string="JST Warehouse">
                    <header>
                        <button name="action_sync_warehouses_by_ids" type="object" string="Sync Warehouse" class="btn-primary"/>
                    </header>
                    <sheet>
                        <group>
                            <group string="Warehouse Information">
                                <field name="companyId"/>
                                <field name="warehouseId"/>
                                <field name="warehouseName"/>
                                <field name="warehouseShortName"/>
                                <field name="warehouseType"/>
                                <field name="warehouseServerCode"/>
                            </group>
                            <group string="Contact Information">
                                <field name="contactName"/>
                                <field name="mobile"/>
                            </group>
                        </group>
                        <group>
                            <group string="Location Details">
                                <field name="country"/>
                                <field name="province"/>
                                <field name="city"/>
                                <field name="district"/>
                                <field name="address"/>
                            </group>
                            <group string="Timestamps">
                                <field name="created" readonly="1"/>
                                <field name="jst_modified" readonly="1"/>
                            </group>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <!-- Search View -->
        <record id="view_jst_warehouse_search" model="ir.ui.view">
            <field name="name">jst.warehouse.search</field>
            <field name="model">jst.warehouse</field>
            <field name="arch" type="xml">
                <search string="Search JST Warehouses">
                    <field name="warehouseId"/>
                    <field name="warehouseName"/>
                    <field name="warehouseShortName"/>
                    <field name="warehouseType"/>
                    <field name="country"/>
                    <field name="province"/>
                    <field name="city"/>
                    <field name="district"/>
                    <field name="contactName"/>
                    <field name="mobile"/>
                    <field name="warehouseServerCode"/>
                    <separator/>
                    <filter string="Has Contact" name="has_contact" domain="[('contactName', '!=', False)]"/>
                    <filter string="No Contact" name="no_contact" domain="[('contactName', '=', False)]"/>
                    <separator/>
                    <filter string="Has Mobile" name="has_mobile" domain="[('mobile', '!=', False)]"/>
                    <filter string="No Mobile" name="no_mobile" domain="[('mobile', '=', False)]"/>
                    <separator/>
                    <group expand="0" string="Group By">
                        <filter string="Country" name="group_country" context="{'group_by': 'country'}"/>
                        <filter string="Province" name="group_province" context="{'group_by': 'province'}"/>
                        <filter string="City" name="group_city" context="{'group_by': 'city'}"/>
                        <filter string="Warehouse Type" name="group_warehouse_type" context="{'group_by': 'warehouseType'}"/>
                        <filter string="Company" name="group_company" context="{'group_by': 'companyId'}"/>
                        <filter string="Creation Date" name="group_created" context="{'group_by': 'created:day'}"/>
                        <filter string="Modification Date" name="group_modified" context="{'group_by': 'jst_modified:day'}"/>
                    </group>
                </search>
            </field>
        </record>

        <!-- Action Window -->
        <record id="action_jst_warehouse" model="ir.actions.act_window">
            <field name="name">JST Warehouses</field>
            <field name="res_model">jst.warehouse</field>
            <field name="view_mode">list,form</field>
            <field name="context">{}</field>
            <field name="domain">[]</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    Create your first JST Warehouse!
                </p>
                <p>
                    JST Warehouses represent the storage locations used by your company.
                    You can sync warehouses from JST system and manage their information here.
                </p>
            </field>
        </record>

        <!-- Action for Sync All Warehouses -->
        <record id="action_sync_all_warehouses" model="ir.actions.server">
            <field name="name">Sync All Warehouses</field>
            <field name="model_id" ref="model_jst_warehouse"/>
            <field name="binding_model_id" ref="model_jst_warehouse"/>
            <field name="binding_view_types">list</field>
            <field name="state">code</field>
            <field name="code">
                model._action_sync_jst_warehouses_weekly()
            </field>
        </record>

    </data>
</odoo>