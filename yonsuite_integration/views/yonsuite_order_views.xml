<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <!-- YonSuite Order list View -->
        <record id="yonsuite_order_view_list" model="ir.ui.view">
            <field name="name">yonsuite.order.view.list</field>
            <field name="model">yonsuite.order</field>
            <field name="arch" type="xml">
                <list>
                    <field name="name" />
                    <field name="code" />
                    <field name="yonsuite_id" />
                    <field name="state" />
                    <field name="status" />
                    <field name="verifystate" />
                    <field name="quote_status" />
                    <field name="receive_contacter" />
                    <field name="receive_contacter_phone" />
                    <field name="agent_id_name" />
                    <field name="transaction_type_name" />
                    <field name="quote_person_id_name" />
                    <field name="currency_name" />
                    <field name="quote_table_total_money" />
                    <field name="total_money" />
                    <field name="vouchdate" />
                    <field name="last_sync_date" />
                </list>
            </field>
        </record>

        <!-- YonSuite Order Form View -->
        <record id="yonsuite_order_view_form" model="ir.ui.view">
            <field name="name">yonsuite.order.view.form</field>
            <field name="model">yonsuite.order</field>
            <field name="arch" type="xml">
                <form string="YonSuite Order">
                    <sheet>
                        <div class="oe_button_box" name="button_box">
                            <button name="action_view_order_lines" type="object" class="oe_stat_button" icon="fa-list">
                                <field name="order_line_ids" widget="statinfo" string="Order Lines" />
                            </button>
                        </div>

                        <div class="oe_title">
                            <h1>
                                <field name="name" placeholder="Order Name" />
                            </h1>
                        </div>

                        <group>
                            <group name="basic_info">
                                <field name="yonsuite_id" />
                                <field name="code" />
                                <field name="state" />
                                <field name="status" />
                                <field name="verifystate" />
                                <field name="quote_status" />
                                <field name="last_sync_date" />
                                <field name="sync_error_message" />
                            </group>
                            <group name="contact_info">
                                <field name="receive_contacter" />
                                <field name="receive_contacter_phone" />
                                <field name="corp_contact" />
                                <field name="corp_contact_user_name" />
                                <field name="agent_id" />
                                <field name="agent_id_name" />
                                <field name="customer_id" />
                            </group>
                        </group>

                        <notebook>
                            <page string="Order Lines" name="order_lines">
                                <field name="order_line_ids" nolabel="1">
                                    <list editable="bottom">
                                        <field name="yonsuite_id" />
                                        <field name="product_id" />
                                        <field name="childs_product_id_name" />
                                        <field name="childs_sku_id_name" />
                                        <field name="childs_qty" />
                                        <field name="childs_ori_unit_price" />
                                        <field name="childs_ori_money" />
                                        <field name="childs_discount_rate" />
                                        <field name="childs_tax_rate" />
                                    </list>
                                </field>
                            </page>

                            <page string="Transaction Details" name="transaction">
                                <group>
                                    <group name="transaction_type">
                                        <field name="transaction_type_id" />
                                        <field name="transaction_type_code" />
                                        <field name="transaction_type_name" />
                                    </group>
                                    <group name="personnel">
                                        <field name="quote_person_id" />
                                        <field name="quote_person_id_name" />
                                        <field name="auditor_id" />
                                        <field name="auditor_id_name" />
                                    </group>
                                </group>
                            </page>

                            <page string="Currency and Money" name="currency">
                                <group>
                                    <group name="currency_info">
                                        <field name="currency_id" />
                                        <field name="currency" />
                                        <field name="currency_name" />
                                        <field name="currency_price_digit" />
                                        <field name="currency_money_digit" />
                                        <field name="currency_code" />
                                        <field name="currency_price_rount" />
                                        <field name="currency_money_rount" />
                                        <field name="nat_currency" />
                                        <field name="nat_currency_name" />
                                        <field name="nat_currency_code" />
                                        <field name="nat_currency_price_digit" />
                                        <field name="nat_currency_money_digit" />
                                        <field name="nat_currency_price_rount" />
                                        <field name="nat_currency_money_rount" />
                                    </group>
                                    <group name="exchange_rate">
                                        <field name="exchange_rate_type" />
                                        <field name="exchange_rate_type_name" />
                                        <field name="exchange_rate_type_digit" />
                                        <field name="exch_rate" />
                                        <field name="exch_rate_date" />
                                    </group>
                                </group>
                                <group>
                                    <group name="money_amounts">
                                        <field name="quote_table_total_money" />
                                        <field name="total_money" />
                                        <field name="total_ori_money" />
                                        <field name="total_ori_tax" />
                                        <field name="total_discount_sum" />
                                        <field name="total_discount_rate" />
                                        <field name="total_particularly_money" />
                                        <field name="whole_favorable_rate" />
                                        <field name="exclusive_tax_quotation" />
                                    </group>
                                </group>
                            </page>

                            <page string="Organization and Invoice" name="organization">
                                <group>
                                    <group name="sales_org">
                                        <field name="sales_org_id" />
                                        <field name="sales_org_id_name" />
                                    </group>
                                    <group name="invoice_type">
                                        <field name="invoice_type_id" />
                                        <field name="invoice_type_id_code" />
                                        <field name="invoice_type_id_name" />
                                        <field name="invoice_title_type" />
                                        <field name="modify_invoice_type" />
                                        <field name="invoice_agent_id" />
                                        <field name="invoice_agent_id_name" />
                                    </group>
                                </group>
                            </page>

                            <page string="Dates" name="dates">
                                <group>
                                    <group name="important_dates">
                                        <field name="vouchdate" />
                                        <field name="audit_time" />
                                        <field name="audit_date" />
                                        <field name="auto_check_date" />
                                        <field name="validity_date_begin" />
                                        <field name="validity_date_end" />
                                        <field name="open_date" />
                                        <field name="create_date_yonsuite" />
                                        <field name="create_time" />
                                        <field name="pubts" />
                                    </group>
                                </group>
                            </page>

                            <page string="Flags and Configuration" name="flags">
                                <group>
                                    <group name="flags">
                                        <field name="is_wf_controlled" />
                                        <field name="is_potential" />
                                        <field name="change_status" />
                                        <field name="return_count" />
                                    </group>
                                    <group name="variant_config">
                                        <field name="variant_config_cts_version" />
                                        <field name="variant_config_cts_code" />
                                        <field name="variant_config_cts_id" />
                                        <field name="variant_configuration" />
                                        <field name="optional_type" />
                                        <field name="optional_quotation_id" />
                                        <field name="optional_quotation_id_code" />
                                    </group>
                                </group>
                                <group>
                                    <group name="parties">
                                        <field name="agent_relation_id" />
                                        <field name="customer" />
                                        <field name="customer_name" />
                                        <field name="creator_id" />
                                        <field name="creator" />
                                        <field name="auditor" />
                                    </group>
                                    <group name="advanced">
                                        <field name="master_org_key_field" />
                                        <field name="trans_type_key_field" />
                                        <field name="mdd_formula_execute_flag" />
                                        <field name="data_source" />
                                        <field name="source_terminal" />
                                        <field name="bustype_extend_attrs_json" />
                                    </group>
                                </group>
                            </page>


                            <page string="Notes" name="notes">
                                <field name="memo" nolabel="1" />
                            </page>
                        </notebook>
                        <chatter />
                    </sheet>
                </form>
            </field>
        </record>

        <!-- YonSuite Order Search View -->
        <record id="yonsuite_order_view_search" model="ir.ui.view">
            <field name="name">yonsuite.order.view.search</field>
            <field name="model">yonsuite.order</field>
            <field name="arch" type="xml">
                <search string="Search YonSuite Orders">
                    <field name="name" />
                    <field name="code" />
                    <field name="yonsuite_id" />
                    <field name="state" />
                    <field name="receive_contacter" />
                    <field name="agent_id_name" />
                    <field name="transaction_type_name" />
                    <field name="quote_person_id_name" />
                    <field name="currency_name" />

                    <separator />
                    <filter string="Draft" name="draft" domain="[('state', '=', 'draft')]" />
                    <filter string="Synced" name="synced" domain="[('state', '=', 'synced')]" />
                    <filter string="Sync Error" name="error" domain="[('state', '=', 'error')]" />
                    
                    <separator />
                    <filter string="Today" name="today"
                        domain="[('vouchdate', '>=', datetime.datetime.combine(context_today(), datetime.time(0,0,0))), ('vouchdate', '&lt;=', datetime.datetime.combine(context_today(), datetime.time(23,59,59)))]" />
                    <filter string="This Week" name="this_week"
                        domain="[('vouchdate', '>=', (context_today() - datetime.timedelta(days=context_today().weekday())).strftime('%Y-%m-%d')), ('vouchdate', '&lt;=', (context_today() + datetime.timedelta(days=6-context_today().weekday())).strftime('%Y-%m-%d'))]" />
                    <filter string="This Month" name="this_month"
                        domain="[('vouchdate', '>=', context_today().strftime('%Y-%m-01')), ('vouchdate', '&lt;=', (context_today() + relativedelta(months=1, days=-1)).strftime('%Y-%m-%d'))]" />

                    <group expand="0" string="Group By">
                        <filter string="State" name="group_state" context="{'group_by': 'state'}" />
                        <filter string="Quote Status" name="group_quote_status" context="{'group_by': 'quote_status'}" />
                        <filter string="Transaction Type" name="group_transaction_type"
                            context="{'group_by': 'transaction_type_name'}" />
                        <filter string="Quote Person" name="group_quote_person"
                            context="{'group_by': 'quote_person_id_name'}" />
                        <filter string="Currency" name="group_currency" context="{'group_by': 'currency_name'}" />
                        <filter string="Vouch Date" name="group_vouchdate" context="{'group_by': 'vouchdate:month'}" />
                    </group>
                </search>
            </field>
        </record>

        <!-- YonSuite Order Action -->
        <record id="yonsuite_order_action" model="ir.actions.act_window">
            <field name="name">YonSuite Orders</field>
            <field name="res_model">yonsuite.order</field>
            <field name="view_mode">list,form</field>
            <field name="context">{}</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    Create your first YonSuite Order!
                </p>
                <p>
                    YonSuite Orders are synchronized from the YonSuite API.
                </p>
            </field>
        </record>


    </data>
</odoo>
